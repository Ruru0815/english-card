<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœŸæœ«è€ƒè¤‡ç¿’ (Final Exam)</title>
    <style>
        :root {
            --primary: #1d4ed8;
            --secondary: #eff6ff;
            --text-main: #1f2937;
            --border: #e5e7eb;
            --accent: #f59e0b;
            --success: #22c55e;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f8fafc;
            margin: 0;
            padding: 20px;
            color: var(--text-main);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            padding: 30px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--border);
            padding-bottom: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        h1 { margin: 0; color: var(--primary); font-size: 24px; }

        .back-btn {
            text-decoration: none;
            color: #666;
            font-weight: bold;
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            transition: 0.2s;
            font-size: 14px;
        }
        .back-btn:hover { background: #eee; }

        .controls {
            margin-bottom: 20px;
            display: flex;
            justify-content: center; /* ç½®ä¸­æŒ‰éˆ• */
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .toggle-label {
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: #555;
            user-select: none;
        }

        .mode-btn {
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .btn-mode1 { background-color: var(--accent); }
        .btn-mode1:hover { background-color: #d97706; transform: translateY(-2px); }
        
        .btn-mode2 { background-color: var(--success); }
        .btn-mode2:hover { background-color: #15803d; transform: translateY(-2px); }

        /* å¥å­åˆ—è¡¨æ¨£å¼ */
        .category-title {
            background: var(--secondary);
            color: var(--primary);
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
        }

        .sentence-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 10px;
            border-bottom: 1px solid var(--border);
            transition: background 0.2s;
        }
        .sentence-row:hover { background-color: #f9f9f9; }

        .en-text {
            flex: 1; font-size: 18px; font-weight: 500; cursor: pointer; color: #2563eb;
            display: flex; align-items: center; gap: 10px; min-height: 30px;
        }
        .speaker-icon { font-size: 18px; opacity: 0.6; flex-shrink: 0; transition: 0.2s; }
        .en-text:hover .speaker-icon { opacity: 1; transform: scale(1.1); }
        .zh-text { flex: 1; text-align: right; color: #4b5563; font-size: 16px; }

        /* éš±è—è‹±æ–‡æ¨£å¼ */
        .text-content { transition: opacity 0.3s ease; }
        .hide-en .text-content { opacity: 0; }
        .hide-en .en-text:hover .text-content { opacity: 1; }

        /* --- å…¨è¢å¹•è¦†è“‹å±¤ --- */
        .overlay-view {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #f0f9ff; z-index: 500; display: none;
            overflow-y: auto; padding: 20px; box-sizing: border-box;
        }

        /* --- è€ƒè©¦ 1: æŒ‘æˆ°æ¨¡å¼ (Flashcard) --- */
        .card-box {
            background: white; width: 100%; max-width: 600px; text-align: center;
            padding: 40px 20px; border-radius: 20px; margin: 50px auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 2px solid white;
        }
        .card-zh { font-size: 32px; font-weight: bold; color: #333; margin-bottom: 30px; line-height: 1.4; }
        .card-en {
            font-size: 24px; color: var(--primary); font-weight: 500; margin-bottom: 30px;
            display: none; padding: 20px; background: var(--secondary); border-radius: 10px; cursor: pointer;
        }
        .fc-controls button {
            padding: 15px 40px; font-size: 18px; border: none; border-radius: 50px;
            cursor: pointer; font-weight: bold; margin: 10px; transition: 0.2s;
        }
        .btn-reveal { background: var(--text-main); color: white; }
        .btn-next { background: var(--primary); color: white; display: none; }
        .btn-exit { background: transparent; color: #666; border: 1px solid #ccc !important; position: fixed; top: 20px; right: 20px; padding: 8px 15px !important; font-size: 14px !important; }

        /* --- è€ƒè©¦ 2: å¡«ç©ºå· (Worksheet) --- */
        .exam2-container {
            max-width: 700px; margin: 40px auto;
        }
        .exam2-title { text-align: center; color: var(--primary); margin-bottom: 30px; font-size: 28px; }
        
        .quiz-card {
            background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); border-left: 5px solid var(--success);
        }
        .quiz-zh { font-size: 20px; font-weight: bold; color: #333; margin-bottom: 10px; }
        .quiz-cloze { 
            font-size: 22px; color: #555; font-family: 'Courier New', monospace; 
            background: #f8fafc; padding: 10px; border-radius: 6px; border: 1px dashed #cbd5e1;
        }
        .quiz-answer {
            margin-top: 15px; display: none; 
            padding: 10px; background: #dcfce7; color: #166534; border-radius: 6px; 
            font-size: 18px; font-weight: bold; cursor: pointer;
        }
        .btn-show-ans {
            margin-top: 10px; padding: 5px 15px; background: #e2e8f0; color: #475569; 
            border: none; border-radius: 15px; cursor: pointer; font-weight: bold; font-size: 14px;
        }
        .btn-show-ans:hover { background: #cbd5e1; }

    </style>
</head>
<body>

    <div class="container" id="list-view">
        <header>
            <h1>âœˆï¸ æœŸæœ«è€ƒå¥å‹è¤‡ç¿’</h1>
            <a href="index.html" class="back-btn">â† å›å­—å…¸</a>
        </header>

        <div class="controls">
            <button class="mode-btn btn-mode1" onclick="startFlashcardMode()">
                ğŸ”¥ è€ƒè©¦ Iï¼šå£èªªæŒ‘æˆ°
            </button>
            <button class="mode-btn btn-mode2" onclick="startExam2Mode()">
                ğŸ“ è€ƒè©¦ IIï¼šå¡«ç©ºç‰¹è¨“
            </button>
        </div>
        
        <div style="text-align:center; margin-bottom:20px;">
            <label class="toggle-label">
                <input type="checkbox" id="toggle-en" onchange="toggleEnglish()"> 
                <span style="margin-left:8px;">ğŸ™ˆ åˆ—è¡¨é®ä½è‹±æ–‡ (è€ƒå£èªª)</span>
            </label>
        </div>

        <div id="content-area"></div>
    </div>

    <div class="overlay-view" id="flashcard-view">
        <button class="btn-exit" onclick="exitOverlay()">âŒ é€€å‡º</button>
        <div class="card-box">
            <div style="color:var(--accent); font-weight:bold; margin-bottom:10px;">è«‹ç¿»è­¯æˆè‹±æ–‡ï¼š</div>
            <div class="card-zh" id="fc-zh">é¡Œç›®</div>
            <div class="card-en" id="fc-en" onclick="speak(this.textContent)">Answer</div>
            <div class="fc-controls">
                <button class="btn-reveal" id="btn-reveal" onclick="revealCardAnswer()">ğŸ‘€ çœ‹è‹±æ–‡</button>
                <button class="btn-next" id="btn-next" onclick="nextCard()">ä¸‹ä¸€é¡Œ â”</button>
            </div>
            <div class="progress">é¡Œæ•¸: <span id="fc-current">1</span> / <span id="fc-total">10</span></div>
        </div>
    </div>

    <div class="overlay-view" id="exam2-view">
        <button class="btn-exit" onclick="exitOverlay()">âŒ é€€å‡º</button>
        <div class="exam2-container">
            <h2 class="exam2-title">ğŸ“ éš¨æ©Ÿå¡«ç©ºæ¸¬é©— (10é¡Œ)</h2>
            <div id="exam2-list">
                </div>
            <button onclick="startExam2Mode()" style="display:block; margin:30px auto; padding:15px 40px; background:var(--primary); color:white; border:none; border-radius:30px; font-size:18px; cursor:pointer;">ğŸ”„ å†è€ƒä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        // --- å®Œæ•´è³‡æ–™åº« (åŒ…å«å¡«ç©ºé¡Œè³‡è¨Š) ---
        // clz: å¡«ç©ºé¡Œé¡Œç›® (Cloze), full: å®Œæ•´å¥å­
        const fullData = [
            { cat: "Basic Info", zh: "ä½ ä¾†è‡ªé‚£è£?", clz: "Where are you ______?", full: "Where are you from?" },
            { cat: "Basic Info", zh: "è«‹æ‰“é–‹è¢‹å­.", clz: "Please ______ the bag.", full: "Please open the bag." },
            { cat: "Customs", zh: "ä½ æœ‰æ¤ç‰©æˆ–è‚‰é¡è£½å“å—?", clz: "Do you have any ______ or meat ______?", full: "Do you have any plants or meat products?" },
            { cat: "Immigration", zh: "ä½ å§“ä»€éº¼?", clz: "What is your ______ name?", full: "What is your last name?" },
            { cat: "Immigration", zh: "ä½ æ­¤è¡Œçš„ç›®çš„æ˜¯ä»€éº¼?", clz: "What is the ______ of your ______?", full: "What is the purpose of your visit?" },
            { cat: "Boarding", zh: "7é»30åˆ†åœ¨9è™Ÿé–€ç™»æ©Ÿã€‚", clz: "You can ______ at ______ 9 at ______.", full: "You can board at gate 9 at 7:30." },
            { cat: "Boarding", zh: "PW-854 ç­æ©Ÿæ­£åœ¨ç™»æ©Ÿã€‚", clz: "Flight PW-854 is now ______.", full: "Flight PW-854 is now boarding." },
            { cat: "Baggage", zh: "è¡Œæåœ¨12è™Ÿè½‰ç›¤ã€‚", clz: "The bags will come out on ______ number ______.", full: "The bags will come out on carousel number 12." },
            { cat: "Immigration", zh: "ä½ è¦åœç•™å¤šä¹…?", clz: "How ______ will you be ______?", full: "How long will you be staying?" },
            { cat: "In-Flight", zh: "æˆ‘åƒç´ ã€‚", clz: "I am a ______.", full: "I am a vegetarian." },
            { cat: "Basic Info", zh: "æˆ‘ä¾†è‡ªå°ç£ã€‚", clz: "I ______ ______ Taiwan.", full: "I am from Taiwan." },
            { cat: "Customs", zh: "ä½ æœ‰è”¬èœæˆ–æ°´æœå—?", clz: "Do you have any ______ or ______?", full: "Do you have any fruits or vegetables?" },
            { cat: "Transport", zh: "æˆ‘å€‘å¯æ­æ¥é§è»Šã€‚", clz: "We can ______ a ______ bus.", full: "We can take a shuttle bus." },
            { cat: "In-Flight", zh: "æˆ‘è¦é¦™è¾£é›è‚‰ã€‚", clz: "I'd like the ______ ______.", full: "I'd like the spicy chicken." },
            { cat: "Security", zh: "è«‹èµ°éé‡‘å±¬æ¢æ¸¬å™¨ã€‚", clz: "Please go ______ the ______ ______.", full: "Please go through the metal detector." },
            { cat: "Check-in", zh: "é€™é‚Šæ˜¯ç¶“æ¿Ÿè‰™å ±åˆ°æ«ƒå°ã€‚", clz: "Here's the ______-class ______ ______ ______.", full: "Here's the economy-class check-in counter." },
            { cat: "Check-in", zh: "è«‹å°‡è¡Œææ”¾åœ¨ç£…ç§¤ä¸Šã€‚", clz: "Please ______ your bags on the ______.", full: "Please put your bags on the scale." },
            { cat: "Check-in", zh: "é€™æ˜¯ä½ çš„ç™»æ©Ÿè­‰ã€‚", clz: "Here is your ______ ______.", full: "Here is your boarding card." },
            { cat: "Baggage", zh: "ä½ çš„è¡Œæåœ¨æ±äº¬ã€‚", clz: "Your ______ is now in ______.", full: "Your suitcase is now in Tokyo." },
            { cat: "Baggage", zh: "è«‹å¡«å¯«è¡¨æ ¼ã€‚", clz: "Please ______ out this ______.", full: "Please fill out this form." },
            { cat: "Boarding", zh: "æˆ‘åé çª—åº§ä½ã€‚", clz: "I get the ______ ______.", full: "I get the window seat." },
            { cat: "Boarding", zh: "è«‹æŠŠè¢‹å­æ”¾åœ¨ï¼ˆé ­é ‚ï¼‰ç½®ç‰©ç®±ã€‚", clz: "Please put the bags in the ______ ______.", full: "Please put the bags in the overhead compartment." },
            { cat: "In-Flight", zh: "æˆ‘è¦ä¸€æ¯æŸ³æ©™æ±ã€‚", clz: "I'd like a ______ of orange ______.", full: "I'd like a glass of orange juice." },
            { cat: "In-Flight", zh: "é€™æ˜¯äº‚æµã€‚", clz: "It's ______.", full: "It's turbulence." },
            { cat: "Security", zh: "è«‹æŠŠä½ çš„ç‰©å“æ”¾åœ¨ç›¤å­è£ã€‚", clz: "Please put your ______ ______ in this ______.", full: "Please put your metal objects in this tray." },
            { cat: "Boarding", zh: "æˆ‘å¯ä»¥çœ‹ä½ çš„ç™»æ©Ÿè­‰å—ï¼Ÿ", clz: "May I see your ______ ______?", full: "May I see your boarding pass?" },
            { cat: "Boarding", zh: "æˆ‘å€‘çš„åº§ä½åœ¨43æ’Aå’ŒBã€‚", clz: "Our seats are ______ ______ A and B.", full: "Our seats are at 43 A and B." },
            { cat: "Immigration", zh: "ä½ ç‚ºä»€éº¼ä¾†é€™è£ï¼Ÿ", clz: "______ do you ______ here?", full: "Why do you come here?" },
            { cat: "Immigration", zh: "æˆ‘ä¾†æ—…éŠã€‚", clz: "I come here for ______.", full: "I come here for tour." },
            { cat: "In-Flight", zh: "æˆ‘èƒ½è¦æ¯›æ¯¯å—ï¼Ÿ", clz: "______ I have a ______?", full: "May I have a blanket?" },
            { cat: "Check-in", zh: "æˆ‘èƒ½çœ‹ä½ çš„æ©Ÿç¥¨å’Œè­·ç…§å—ï¼Ÿ", clz: "May I see your ______ and ______?", full: "May I see your tickets and passports?" },
            { cat: "Check-in", zh: "æˆ‘è¦ä¸€å€‹é çª—ä½å­ã€‚", clz: "I'd like a ______ ______.", full: "I'd like a window seat." },
            { cat: "Customs", zh: "è«‹æŠŠè¡Œææ”¾åœ¨æ«ƒå°ä¸Šã€‚", clz: "Please ______ your bags ______ the ______.", full: "Please put your bags on the counter." },
            { cat: "Baggage", zh: "æˆ‘è¦ç™»è¨˜ä¸€ä»¶å¤±è½è¡Œæã€‚", clz: "I want to ______ a ______ bag.", full: "I want to report a lost bag." },
            { cat: "Check-in", zh: "å ±åˆ°æ«ƒå°åœ¨å“ªè£ï¼Ÿ", clz: "Where is the ______ ______?", full: "Where is the check-in counter?" },
            { cat: "Check-in", zh: "å®ƒåœ¨ç¬¬å››èµ°é“ã€‚", clz: "It is ______ ______ 4.", full: "It is in aisle 4." },
            { cat: "Check-in", zh: "æˆ‘è¦è¾¦ç†ç™»æ©Ÿå ±åˆ°ã€‚", clz: "I want to ______ ______.", full: "I want to check in." },
            { cat: "Customs", zh: "æˆ‘å·²å¡«å¥½æµ·é—œç”³å ±å–®äº†ã€‚", clz: "I filled out the ______ ______ forms.", full: "I filled out the customs declaration forms." },
            { cat: "Customs", zh: "è¼ªåˆ°æˆ‘å€‘äº†ã€‚", clz: "It's our ______.", full: "It's our turn." },
            { cat: "Check-in", zh: "ä½ çš„æ‰˜é‹è¡Œææœ‰å¹¾ä»¶ï¼Ÿ", clz: "______ many bags will you ______ ______?", full: "How many bags will you check in?" },
            { cat: "Check-in", zh: "è¶…é‡è²»æ˜¯30å…ƒã€‚", clz: "The ______ charge is 30 dollars.", full: "The overweight-luggage charge is 30 dollars." },
            { cat: "Boarding", zh: "ç™»æ©Ÿé–€åœ¨å“ªè£ï¼Ÿ", clz: "______ is the ______ ______?", full: "Where is the boarding gate?" },
            { cat: "Immigration", zh: "ä½ å°‡è¦ä½é‚£è£ï¼Ÿ", clz: "______ will you be ______?", full: "Where will you be staying?" },
            { cat: "Baggage", zh: "é€™è£çš„å®‰æª¢å¾ˆåš´ã€‚", clz: "The ______ is ______ here.", full: "The security is tight here." },
            { cat: "In-Flight", zh: "è«‹ç¹«å¥½å®‰å…¨å¸¶ã€‚", clz: "Please keep your seat ______ ______.", full: "Please keep your seat belt fastened." }
        ];

        // --- åˆå§‹åŒ–åˆ—è¡¨ (Dictionary Mode) ---
        const contentArea = document.getElementById('content-area');
        // åˆ†é¡æ•´ç†
        const categories = {};
        fullData.forEach(item => {
            if(!categories[item.cat]) categories[item.cat] = [];
            categories[item.cat].push(item);
        });

        for(const [cat, items] of Object.entries(categories)) {
            const sectionDiv = document.createElement('div');
            sectionDiv.innerHTML = `<div class="category-title">${cat}</div>`;
            items.forEach(item => {
                const row = document.createElement('div'); row.className = 'sentence-row';
                row.innerHTML = `
                    <div class="en-text" onclick="speak('${item.full.replace(/'/g, "\\'")}')">
                        <span class="speaker-icon">ğŸ”Š</span>
                        <span class="text-content">${item.full}</span>
                    </div>
                    <div class="zh-text">${item.zh}</div>
                `;
                sectionDiv.appendChild(row);
            });
            contentArea.appendChild(sectionDiv);
        }

        // --- å…±ç”¨åŠŸèƒ½ ---
        function speak(text) {
            window.speechSynthesis.cancel();
            const encodedText = encodeURIComponent(text);
            const url = `https://translate.google.com/translate_tts?ie=UTF-8&tl=en&client=tw-ob&q=${encodedText}`;
            const audio = new Audio(url);
            audio.play().catch(e => {
                const u = new SpeechSynthesisUtterance(text);
                u.lang = 'en-US'; window.speechSynthesis.speak(u);
            });
        }

        function toggleEnglish() {
            const checkbox = document.getElementById('toggle-en');
            const container = document.querySelector('.container');
            if (checkbox.checked) container.classList.add('hide-en');
            else container.classList.remove('hide-en');
        }

        function exitOverlay() {
            document.querySelectorAll('.overlay-view').forEach(el => el.style.display = 'none');
            document.getElementById('list-view').style.display = 'block';
        }

        // --- è€ƒè©¦ I: Flashcard Logic ---
        let flashcardQueue = [];
        let fcIndex = 0;

        function startFlashcardMode() {
            flashcardQueue = [...fullData].sort(() => Math.random() - 0.5).slice(0, 10);
            fcIndex = 0;
            document.getElementById('list-view').style.display = 'none';
            document.getElementById('flashcard-view').style.display = 'flex';
            showCard();
        }

        function showCard() {
            if (fcIndex >= flashcardQueue.length) { alert("ğŸ‰ è€ƒè©¦çµæŸï¼"); exitOverlay(); return; }
            const item = flashcardQueue[fcIndex];
            document.getElementById('fc-current').textContent = fcIndex + 1;
            document.getElementById('fc-total').textContent = flashcardQueue.length;
            document.getElementById('fc-zh').textContent = item.zh;
            const enBox = document.getElementById('fc-en');
            enBox.textContent = item.full; enBox.style.display = 'none';
            document.getElementById('btn-reveal').style.display = 'inline-block';
            document.getElementById('btn-next').style.display = 'none';
        }

        function revealCardAnswer() {
            const enBox = document.getElementById('fc-en'); enBox.style.display = 'block';
            speak(enBox.textContent);
            document.getElementById('btn-reveal').style.display = 'none';
            document.getElementById('btn-next').style.display = 'inline-block';
        }
        function nextCard() { fcIndex++; showCard(); }

        // --- è€ƒè©¦ II: Exam 2 (Cloze) Logic ---
        function startExam2Mode() {
            const questions = [...fullData].sort(() => Math.random() - 0.5).slice(0, 10);
            const container = document.getElementById('exam2-list');
            container.innerHTML = '';

            questions.forEach((q, idx) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';
                card.innerHTML = `
                    <div class="quiz-zh">${idx+1}. ${q.zh}</div>
                    <div class="quiz-cloze">${q.clz}</div>
                    <button class="btn-show-ans" onclick="this.nextElementSibling.style.display='block'">ğŸ‘ï¸ é¡¯ç¤ºç­”æ¡ˆ</button>
                    <div class="quiz-answer" onclick="speak('${q.full.replace(/'/g, "\\'")}')">
                        ${q.full} ğŸ”Š
                    </div>
                `;
                container.appendChild(card);
            });

            document.getElementById('list-view').style.display = 'none';
            document.getElementById('exam2-view').style.display = 'block';
        }

    </script>
</body>
</html>
