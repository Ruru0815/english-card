<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœŸæœ«è€ƒè¤‡ç¿’ (Final Exam)</title>
    <style>
        :root {
            --primary: #1d4ed8;
            --secondary: #eff6ff;
            --text-main: #1f2937;
            --border: #e5e7eb;
            --accent: #f59e0b; /* æŒ‘æˆ°æ¨¡å¼æ©˜è‰² */
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f8fafc;
            margin: 0;
            padding: 20px;
            color: var(--text-main);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            padding: 30px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--border);
            padding-bottom: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        h1 { margin: 0; color: var(--primary); font-size: 24px; }

        .back-btn {
            text-decoration: none;
            color: #666;
            font-weight: bold;
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            transition: 0.2s;
            font-size: 14px;
        }
        .back-btn:hover { background: #eee; }

        .controls {
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .toggle-label {
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: #555;
        }

        /* æŒ‘æˆ°æŒ‰éˆ• */
        .challenge-btn {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 4px 10px rgba(245, 158, 11, 0.3);
            transition: transform 0.2s;
        }
        .challenge-btn:hover { background-color: #d97706; transform: translateY(-2px); }

        /* å¥å­åˆ—è¡¨æ¨£å¼ */
        .category-title {
            background: var(--secondary);
            color: var(--primary);
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
        }

        .sentence-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 10px;
            border-bottom: 1px solid var(--border);
            transition: background 0.2s;
        }
        .sentence-row:hover { background-color: #f9f9f9; }

        .en-text {
            flex: 1;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            color: #2563eb;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .en-text:hover { text-decoration: underline; }
        .speaker-icon { font-size: 16px; opacity: 0.6; }

        .zh-text {
            flex: 1;
            text-align: right;
            color: #4b5563;
            font-size: 16px;
            transition: opacity 0.3s;
        }

        .hide-zh .zh-text { opacity: 0; pointer-events: none; }

        /* --- æŒ‘æˆ°æ¨¡å¼å…¨è¢å¹• (Overlay) --- */
        .flashcard-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: white;
            z-index: 500;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .card-box {
            background: white;
            width: 100%;
            max-width: 600px;
            text-align: center;
            padding: 40px 20px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 2px solid var(--secondary);
        }

        .card-zh {
            font-size: 32px;
            font-weight: bold;
            color: #333;
            margin-bottom: 30px;
            line-height: 1.4;
        }

        .card-en {
            font-size: 24px;
            color: var(--primary);
            font-weight: 500;
            margin-bottom: 30px;
            display: none; /* é è¨­éš±è— */
            padding: 20px;
            background: var(--secondary);
            border-radius: 10px;
            cursor: pointer;
        }

        .fc-controls button {
            padding: 15px 40px;
            font-size: 18px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px;
            transition: 0.2s;
        }

        .btn-reveal { background: var(--text-main); color: white; }
        .btn-next { background: var(--primary); color: white; display: none; }
        .btn-exit { background: transparent; color: #999; border: 1px solid #ddd !important; }

        .progress {
            margin-top: 20px;
            color: #999;
            font-size: 14px;
        }

    </style>
</head>
<body>

    <div class="container" id="list-view">
        <header>
            <h1>âœˆï¸ æœŸæœ«è€ƒå¥å‹è¤‡ç¿’</h1>
            <a href="index.html" class="back-btn">â† å›å­—å…¸</a>
        </header>

        <div class="controls">
            <button class="challenge-btn" onclick="startFlashcardMode()">
                ğŸ”¥ æ¥µé™æŒ‘æˆ° (ä¸­ç¿»è‹±)
            </button>

            <label class="toggle-label">
                <input type="checkbox" id="toggle-zh" onchange="toggleChinese()"> 
                <span style="margin-left:8px;">ğŸ™ˆ åˆ—è¡¨é®ä½ä¸­æ–‡</span>
            </label>
        </div>

        <div id="content-area">
            </div>
    </div>

    <div class="flashcard-overlay" id="flashcard-view">
        <div class="card-box">
            <div style="color:var(--accent); font-weight:bold; margin-bottom:10px;">è«‹ç¿»è­¯æˆè‹±æ–‡ï¼š</div>
            
            <div class="card-zh" id="fc-zh">é¡Œç›®è¼‰å…¥ä¸­...</div>
            
            <div class="card-en" id="fc-en" onclick="speak(this.textContent)">
                Answer
            </div>

            <div class="fc-controls">
                <button class="btn-reveal" id="btn-reveal" onclick="revealAnswer()">ğŸ‘€ çœ‹è‹±æ–‡</button>
                <button class="btn-next" id="btn-next" onclick="nextCard()">ä¸‹ä¸€é¡Œ â”</button>
            </div>

            <div class="fc-controls" style="margin-top:20px;">
                <button class="btn-exit" onclick="exitFlashcard()">é€€å‡ºæ¨¡å¼</button>
            </div>

            <div class="progress">
                é¡Œæ•¸: <span id="fc-current">1</span> / <span id="fc-total">10</span>
            </div>
        </div>
    </div>

    <script>
        const examData = [
            {
                category: "Check-in (è¾¦ç†ç™»æ©Ÿ)",
                sentences: [
                    { en: "Where is the check-in counter?", zh: "ç™»æ©Ÿæ«ƒå°åœ¨é‚£è£ï¼Ÿ" },
                    { en: "It's in aisle 4.", zh: "å®ƒåœ¨ç¬¬å››èµ°é“ã€‚" },
                    { en: "It's at the end of the terminal.", zh: "å®ƒåœ¨èˆªç«™æœ«ç«¯ã€‚" },
                    { en: "Here's the economy-class check-in counter.", zh: "é€™é‚Šæ˜¯ç¶“æ¿Ÿè‰™æ«ƒå°ã€‚" },
                    { en: "We want to check in.", zh: "æˆ‘è¦è¾¦ç†ç™»æ©Ÿã€‚" },
                    { en: "May I see your tickets and passports?", zh: "æˆ‘èƒ½çœ‹ä½ çš„æ©Ÿç¥¨å’Œè­·ç…§å—ï¼Ÿ" },
                    { en: "Here you are.", zh: "å°±åœ¨é€™è£ã€‚" },
                    { en: "We'd like a window seat and an aisle seat.", zh: "æˆ‘è¦ä¸€å€‹é çª—ä½å­å’Œä¸€å€‹é èµ°é“ä½å­ã€‚" },
                    { en: "How many bags will you check in?", zh: "ä½ çš„æ‰˜é‹è¡Œææœ‰å¹¾ä»¶ï¼Ÿ" },
                    { en: "Please put your bags on the scale.", zh: "è«‹å°‡è¡Œææ”¾åœ¨ç£…ç§¤ä¸Šã€‚" },
                    { en: "There will be an overweight-luggage charge of thirty dollars.", zh: "è¶…é‡è²»æ˜¯30å…ƒã€‚" },
                    { en: "Here is your boarding card.", zh: "é€™æ˜¯ä½ çš„ç™»æ©Ÿè­‰ã€‚" },
                    { en: "Where is the boarding gate?", zh: "ç™»æ©Ÿé–€åœ¨é‚£è£ï¼Ÿ" },
                    { en: "You can board at gate nine at seven-thirty.", zh: "7é»30åˆ†åœ¨9è™Ÿé–€ç™»æ©Ÿã€‚" }
                ]
            },
            {
                category: "Security Check (å®‰æª¢)",
                sentences: [
                    { en: "Please empty out your pockets.", zh: "è«‹æŠŠå£è¢‹æç©ºã€‚" },
                    { en: "Please put all metal objects in this tray.", zh: "è«‹æŠŠé‡‘å±¬ç‰©å“æ”¾åœ¨ç›¤å­è£ã€‚" },
                    { en: "Please go through the metal detector.", zh: "è«‹èµ°éé‡‘å±¬æ¢æ¸¬é–€ã€‚" }
                ]
            },
            {
                category: "Boarding (ç™»æ©Ÿ)",
                sentences: [
                    { en: "Flight PW-854 is now boarding.", zh: "PW-854 ç­æ©Ÿæ­£åœ¨ç™»æ©Ÿã€‚" },
                    { en: "All passengers on flight PW-854 should proceed to gate nine for boarding.", zh: "PW-854 ç­æ©Ÿçš„æ—…å®¢è«‹åˆ°9è™Ÿç™»æ©Ÿé–€ç™»æ©Ÿã€‚" },
                    { en: "All passengers seated in rows thirty-six to forty-four may now board.", zh: "36æ’åˆ°44æ’çš„æ—…å®¢ç¾åœ¨å¯ä»¥ç™»æ©Ÿäº†ã€‚" },
                    { en: "May I see your boarding pass?", zh: "æˆ‘å¯ä»¥çœ‹ä½ çš„ç™»æ©Ÿè­‰å—ï¼Ÿ" },
                    { en: "Our seats are at forty-three A and B.", zh: "æˆ‘å€‘çš„åº§åœ¨43æ’Aå’ŒBã€‚" },
                    { en: "I get the window seat!", zh: "æˆ‘åé çª—åº§ä½ã€‚" },
                    { en: "Please put the bag in the overhead compartment.", zh: "è«‹æŠŠè¢‹å­æ”¾åœ¨ç½®ç‰©ç®±ã€‚" },
                    { en: "Please keep your seat in the upright position.", zh: "è«‹æŠŠæ¤…å­è±ç›´ã€‚" }
                ]
            },
            {
                category: "In-Flight Service (æ©Ÿä¸Šæœå‹™)",
                sentences: [
                    { en: "Please keep your seat belt fastened.", zh: "è«‹ç¹«å¥½å®‰å…¨å¸¶ã€‚" },
                    { en: "May I have a pillow and a blanket?", zh: "æˆ‘èƒ½è¦æ•é ­å’Œæ¯›æ¯¯å—ï¼Ÿ" },
                    { en: "Would you like something to drink?", zh: "ä½ è¦äº›é£²æ–™å—ï¼Ÿ" },
                    { en: "I would like a glass of orange juice.", zh: "æˆ‘è¦ä¸€æ¯æŸ³æ©™æ±ã€‚" },
                    { en: "I'd like a cup of tea.", zh: "æˆ‘è¦ä¸€æ¯èŒ¶ã€‚" },
                    { en: "Would you like the spicy chicken or the fried beef?", zh: "ä½ è¦è¾£é›è‚‰é‚„æ˜¯ç‚’ç‰›è‚‰ï¼Ÿ" },
                    { en: "I'll have the chicken.", zh: "æˆ‘è¦é›è‚‰ã€‚" },
                    { en: "I am a vegetarian.", zh: "æˆ‘åƒç´ ã€‚" },
                    { en: "It's turbulence.", zh: "é€™æ˜¯äº‚æµã€‚" }
                ]
            },
            {
                category: "Immigration (å…¥å¢ƒç§»æ°‘å±€)",
                sentences: [
                    { en: "What is your last name?", zh: "ä½ å§“ä»€éº¼ï¼Ÿ" },
                    { en: "My name is _____.", zh: "æˆ‘å§“ _____ã€‚" },
                    { en: "What is the purpose of your visit?", zh: "ä½ æ­¤è¡Œçš„ç›®çš„æ˜¯ä»€éº¼ï¼Ÿ" },
                    { en: "Why do you come here?", zh: "ä½ ç‚ºä»€éº¼ä¾†é€™è£ï¼Ÿ" },
                    { en: "I come here for tour.", zh: "æˆ‘ä¾†æ—…éŠã€‚" },
                    { en: "How long are you staying?", zh: "ä½ è¦åœç•™å¤šä¹…ï¼Ÿ" },
                    { en: "We are staying for 2 weeks.", zh: "æˆ‘å€‘è¦åœç•™2é€±ã€‚" },
                    { en: "Where are you staying?", zh: "ä½ è¦ä½é‚£è£ï¼Ÿ" }
                ]
            },
            {
                category: "Baggage Claim (è¡Œææé ˜)",
                sentences: [
                    { en: "The security is tight here.", zh: "é€™è£¡çš„å®‰æª¢å¾ˆåš´ã€‚" },
                    { en: "The bags will come out on carousel number twelve.", zh: "è¡Œæåœ¨12è™Ÿè½‰ç›¤ã€‚" },
                    { en: "I want to report a lost bag.", zh: "æˆ‘è¦ç™»è¨˜ä¸€ä»¶å¤±è½è¡Œæã€‚" },
                    { en: "Your suitcase is now in Tokyo.", zh: "ä½ çš„è¡Œæåœ¨æ±äº¬ã€‚" },
                    { en: "Please fill out this form.", zh: "è«‹å¡«è¡¨æ ¼ã€‚" }
                ]
            },
            {
                category: "Customs (æµ·é—œ)",
                sentences: [
                    { en: "I filled out the customs-declaration forms.", zh: "æˆ‘å·²å¡«å¥½æµ·é—œç”³è«‹å–®äº†ã€‚" },
                    { en: "It's our turn.", zh: "è¼ªåˆ°æˆ‘å€‘äº†ã€‚" },
                    { en: "Please put your bags on the counter.", zh: "è«‹æŠŠè¡Œææ”¾åœ¨æ«ƒå°ä¸Šã€‚" },
                    { en: "Where are you from?", zh: "ä½ ä¾†è‡ªé‚£è£ï¼Ÿ" },
                    { en: "I am from Taiwan.", zh: "æˆ‘ä¾†è‡ªå°ç£ã€‚" },
                    { en: "Here you go.", zh: "é€™æ˜¯ä½ è¦çš„ã€‚" },
                    { en: "Please open the bag.", zh: "è«‹æ‰“é–‹è¢‹å­ã€‚" },
                    { en: "Do you have any plants or meat products?", zh: "ä½ æœ‰è‚‰é¡æˆ–è¾²ç”¢è£½å“å—ï¼Ÿ" },
                    { en: "Do you have any fruits or vegetables?", zh: "ä½ æœ‰ç”Ÿé®®è”¬æœå—ï¼Ÿ" },
                    { en: "We can take a shuttle bus.", zh: "æˆ‘å€‘å¯æ­æ¥é§è»Šã€‚" }
                ]
            },
            {
                category: "Transportation (äº¤é€š)",
                sentences: [
                    { en: "How do you get to school?", zh: "ä½ å¦‚ä½•ä¸Šå­¸ï¼Ÿ" },
                    { en: "I go to school by scooter.", zh: "æˆ‘é¨æ©Ÿè»Šä¸Šå­¸ã€‚" },
                    { en: "How can I get to the station?", zh: "æˆ‘æ€éº¼å»è»Šç«™ï¼Ÿ" },
                    { en: "You can take the bus to the station.", zh: "ä½ å¯ä»¥æ­å…¬è»Šå»è»Šç«™ã€‚" },
                    { en: "I'll take the MRT to the park.", zh: "æˆ‘æ­æ·é‹å»å…¬åœ’ã€‚" }
                ]
            }
        ];

        // --- åˆå§‹åŒ–é é¢ (åˆ—è¡¨æ¨¡å¼) ---
        const contentArea = document.getElementById('content-area');
        examData.forEach(section => {
            const sectionDiv = document.createElement('div');
            const title = document.createElement('div');
            title.className = 'category-title'; title.textContent = section.category;
            sectionDiv.appendChild(title);
            section.sentences.forEach(item => {
                const row = document.createElement('div'); row.className = 'sentence-row';
                row.innerHTML = `<div class="en-text" onclick="speak('${item.en.replace(/'/g, "\\'")}')"><span class="speaker-icon">ğŸ”Š</span>${item.en}</div><div class="zh-text">${item.zh}</div>`;
                sectionDiv.appendChild(row);
            });
            contentArea.appendChild(sectionDiv);
        });

        // --- åŠŸèƒ½å‡½æ•¸ ---
        function speak(text) {
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.lang = 'en-US'; u.rate = 0.9;
            window.speechSynthesis.speak(u);
        }

        function toggleChinese() {
            const checkbox = document.getElementById('toggle-zh');
            const container = document.querySelector('.container');
            if (checkbox.checked) container.classList.add('hide-zh');
            else container.classList.remove('hide-zh');
        }

        // --- æŒ‘æˆ°æ¨¡å¼ (Flashcard) é‚è¼¯ ---
        let flashcardQueue = [];
        let fcIndex = 0;

        function startFlashcardMode() {
            // 1. æ‰å¹³åŒ–è³‡æ–™ï¼šæŠŠæ‰€æœ‰å¥å­æ”¶é›†åˆ°ä¸€å€‹é™£åˆ—
            flashcardQueue = [];
            examData.forEach(cat => {
                cat.sentences.forEach(s => flashcardQueue.push(s));
            });

            // 2. éš¨æ©Ÿæ‰“äº‚ (æ´—ç‰Œ)
            flashcardQueue.sort(() => Math.random() - 0.5);

            // 3. ä»‹é¢åˆ‡æ›
            fcIndex = 0;
            document.getElementById('list-view').style.display = 'none'; // éš±è—åˆ—è¡¨èƒŒæ™¯ï¼Œå°ˆæ³¨è€ƒè©¦ (å¦‚æœä½ æƒ³ä¿ç•™èƒŒæ™¯å¯ç§»é™¤é€™è¡Œ)
            document.getElementById('flashcard-view').style.display = 'flex';
            
            showCard();
        }

        function showCard() {
            // æª¢æŸ¥æ˜¯å¦çµæŸ
            if (fcIndex >= flashcardQueue.length) {
                alert("ğŸ‰ æ­å–œï¼ä½ å·²ç¶“è¤‡ç¿’å®Œæ‰€æœ‰å¥å‹äº†ï¼");
                exitFlashcard();
                return;
            }

            const item = flashcardQueue[fcIndex];
            
            // æ›´æ–°è¨ˆæ•¸
            document.getElementById('fc-current').textContent = fcIndex + 1;
            document.getElementById('fc-total').textContent = flashcardQueue.length;

            // é¡¯ç¤ºä¸­æ–‡ï¼Œéš±è—è‹±æ–‡
            document.getElementById('fc-zh').textContent = item.zh;
            
            const enBox = document.getElementById('fc-en');
            enBox.textContent = item.en; // æ”¾å…¥è‹±æ–‡ä½†ä¸é¡¯ç¤º
            enBox.style.display = 'none';

            // æŒ‰éˆ•é‡ç½®
            document.getElementById('btn-reveal').style.display = 'inline-block';
            document.getElementById('btn-next').style.display = 'none';
        }

        function revealAnswer() {
            const enBox = document.getElementById('fc-en');
            enBox.style.display = 'block';
            
            // è‡ªå‹•ç™¼éŸ³
            speak(enBox.textContent);

            document.getElementById('btn-reveal').style.display = 'none';
            document.getElementById('btn-next').style.display = 'inline-block';
        }

        function nextCard() {
            fcIndex++;
            showCard();
        }

        function exitFlashcard() {
            document.getElementById('flashcard-view').style.display = 'none';
            document.getElementById('list-view').style.display = 'block';
        }
    </script>
</body>
</html>
